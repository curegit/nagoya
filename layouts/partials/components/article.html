{{ $created := .Date.Format "2006/01/02" }}
{{ $lastmod := .Lastmod.Format "2006/01/02" }}
<article class="single">
  <header>
    <h1 class="title" itemprop="headline">{{ .Title }}</h1>
    {{ if .Params.page }}
      {{ if site.Params.showLastmod }}
        <div class="time">
          <div>更新: <time datetime="{{ .Lastmod.Format "2006-01-02" }}">{{ $lastmod }}</time></div>
        </div>
      {{ end }}
    {{ else }}
      <div class="time">
        {{ if or (not site.Params.showLastmod) (eq $created $lastmod) }}
          <div><time datetime="{{ .Date.Format "2006-01-02" }}"> {{ $created }}</time></div>
        {{ else }}
          <div>作成: <time datetime="{{ .Date.Format "2006-01-02" }}">{{ $created }}</time></div>
          <div>更新: <time datetime="{{ .Lastmod.Format "2006-01-02" }}">{{ $lastmod }}</time></div>
        {{ end }}
      </div>
    {{ end }}
  </header>
  <div class="body">
    {{ .Content }}
  </div>
  <footer>
    {{ $taxonomy := "tags" }}
    {{ with .GetTerms $taxonomy }}
      <div>
        <div>{{ (site.GetPage $taxonomy).LinkTitle }}:</div>
        <ul class="tags">
          {{ range . }}
            <li class="tag"><a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></li>
          {{ end }}
        </ul>
      </div>
    {{ end }}
    {{ range $taxonomy, $terms := site.Taxonomies }}
      {{ if not (in (slice "tags" "archives") $taxonomy) }}
        {{ with $.GetTerms $taxonomy }}
          <div>
            <div>{{ (site.GetPage $taxonomy).LinkTitle }}:</div>
            <ul>
              {{ range . }}
                <li><a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></li>
              {{ end }}
            </ul>
          </div>
        {{ end }}
      {{ end }}
    {{ end }}
    {{ if site.Params.showAuthor }}
      {{ $author := .Params.author | default site.Params.author | default false }}
      {{ $authorLink := .Params.authorLink | default site.Params.authorLink | default false }}
      {{ if or $author $authorLink }}
        <div itemprop="author" itemscope itemtype="https://schema.org/Person">
          {{ if and $author $authorLink }}
            <a href="{{ $authorLink }}" itemprop="url"><span itemprop="name">{{ $author }}</span></a>
          {{ else if $author }}
            <span itemprop="name">{{ $author }}</span>
          {{ else if $authorLink }}
            <meta itemprop="url" content="{{ $authorLink }}">
          {{ end }}
        </div>
      {{ end }}
    {{ end }}
  </footer>
</article>
